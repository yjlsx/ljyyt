<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å…¨é¢è°ƒè¯•</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <div class="container py-5">
    <h1 class="text-center mb-4">ğŸ” å…¨é¢è°ƒè¯•é¡µé¢</h1>
    
    <div class="alert alert-warning">
      <strong>é—®é¢˜ï¼š</strong> éŸ³ä¹å’Œè§†é¢‘æ ‡ç­¾ä¸‹éƒ½æ²¡æœ‰æ˜¾ç¤ºä»»ä½•å†…å®¹
    </div>
    
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">è°ƒè¯•ä¿¡æ¯</h5>
          </div>
          <div class="card-body">
            <ul id="debug-info" class="list-unstyled">
              <li>â³ ç­‰å¾…åŠ è½½...</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="card">
          <div class="card-header bg-danger text-white">
            <h5 class="mb-0">é”™è¯¯ä¿¡æ¯</h5>
          </div>
          <div class="card-body">
            <ul id="error-info" class="list-unstyled">
              <li>âœ… æš‚æ— é”™è¯¯</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card mt-4">
      <div class="card-header bg-success text-white">
        <h5 class="mb-0">æ•°æ®æ£€æŸ¥</h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <h6>éŸ³ä¹æ•°æ®ï¼š</h6>
            <pre id="music-data-check" class="bg-light p-2">æ£€æŸ¥ä¸­...</pre>
          </div>
          <div class="col-md-6">
            <h6>è§†é¢‘æ•°æ®ï¼š</h6>
            <pre id="video-data-check" class="bg-light p-2">æ£€æŸ¥ä¸­...</pre>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card mt-4">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">æ¸²æŸ“æµ‹è¯•</h5>
      </div>
      <div class="card-body">
        <h6>éŸ³ä¹åˆ—è¡¨ï¼š</h6>
        <div id="music-list-test" class="row mb-4"></div>
        
        <h6>è§†é¢‘åˆ—è¡¨ï¼š</h6>
        <div id="video-list-test" class="row"></div>
      </div>
    </div>
  </div>

  <!-- å…ˆåŠ è½½è§†é¢‘æ•°æ® -->
  <script src="videos/video_data.js"></script>
  
  <script>
    const debugInfo = document.getElementById('debug-info');
    const errorInfo = document.getElementById('error-info');
    const musicDataCheck = document.getElementById('music-data-check');
    const videoDataCheck = document.getElementById('video-data-check');
    
    function addDebugInfo(message) {
      const li = document.createElement('li');
      li.innerHTML = message;
      debugInfo.appendChild(li);
      console.log(message);
    }
    
    function addErrorInfo(message) {
      const li = document.createElement('li');
      li.innerHTML = '<span class="text-danger">âŒ ' + message + '</span>';
      errorInfo.appendChild(li);
      console.error(message);
    }
    
    function formatTime(seconds) {
      if(isNaN(seconds) || seconds <= 0) return '0:00';
      const min = Math.floor(seconds / 60);
      const sec = Math.floor(seconds % 60);
      return min + ':' + (sec < 10 ? '0' : '') + sec;
    }

    document.addEventListener('DOMContentLoaded', function() {
      addDebugInfo('âœ… DOMåŠ è½½å®Œæˆ');
      
      // æ£€æŸ¥musicData
      try {
        if (typeof musicData === 'undefined') {
          addErrorInfo('musicData æœªå®šä¹‰');
          musicDataCheck.textContent = 'âŒ musicData å˜é‡æœªæ‰¾åˆ°';
        } else {
          addDebugInfo('âœ… musicData å·²å®šä¹‰');
          addDebugInfo('ğŸ“Š éŸ³ä¹æ•°é‡: ' + musicData.length);
          musicDataCheck.textContent = 'âœ… musicData å­˜åœ¨ï¼Œæ•°é‡: ' + musicData.length;
          
          // æ¸²æŸ“éŸ³ä¹åˆ—è¡¨
          renderMusicList();
        }
      } catch (error) {
        addErrorInfo('musicData æ£€æŸ¥é”™è¯¯: ' + error.message);
      }
      
      // æ£€æŸ¥videoData
      try {
        if (typeof videoData === 'undefined') {
          addErrorInfo('videoData æœªå®šä¹‰');
          videoDataCheck.textContent = 'âŒ videoData å˜é‡æœªæ‰¾åˆ°';
        } else {
          addDebugInfo('âœ… videoData å·²å®šä¹‰');
          addDebugInfo('ğŸ“Š è§†é¢‘æ•°é‡: ' + videoData.length);
          videoDataCheck.textContent = 'âœ… videoData å­˜åœ¨ï¼Œæ•°é‡: ' + videoData.length;
          
          // æ¸²æŸ“è§†é¢‘åˆ—è¡¨
          renderVideoList();
        }
      } catch (error) {
        addErrorInfo('videoData æ£€æŸ¥é”™è¯¯: ' + error.message);
      }
    });
    
    function renderMusicList() {
      try {
        const container = document.getElementById('music-list-test');
        container.innerHTML = '';
        
        musicData.forEach(function(track, index) {
          const col = document.createElement('div');
          col.className = 'col-md-6 mb-2';
          
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = 
            '<div class="card-body p-2">' +
              '<small>' + track.title + '</small>' +
            '</div>';
          
          col.appendChild(card);
          container.appendChild(col);
        });
        
        addDebugInfo('âœ… éŸ³ä¹åˆ—è¡¨æ¸²æŸ“å®Œæˆ');
      } catch (error) {
        addErrorInfo('éŸ³ä¹åˆ—è¡¨æ¸²æŸ“é”™è¯¯: ' + error.message);
      }
    }
    
    function renderVideoList() {
      try {
        const container = document.getElementById('video-list-test');
        container.innerHTML = '';
        
        videoData.forEach(function(track, index) {
          const col = document.createElement('div');
          col.className = 'col-md-6 mb-2';
          
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = 
            '<div class="card-body p-2">' +
              '<small>' + track.title + '</small>' +
            '</div>';
          
          col.appendChild(card);
          container.appendChild(col);
        });
        
        addDebugInfo('âœ… è§†é¢‘åˆ—è¡¨æ¸²æŸ“å®Œæˆ');
      } catch (error) {
        addErrorInfo('è§†é¢‘åˆ—è¡¨æ¸²æŸ“é”™è¯¯: ' + error.message);
      }
    }
  </script>
</body>
</html>